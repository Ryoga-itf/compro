学籍番号: __STUDENT_ID__
氏名: __STUDENT_NAME__
課題番号: 7

演習に用いた環境： 自分の PC

課題 7-1 を実行した結果を以下に示す

$ gcc ex7-1.s lib.s -no-pie && ./a.out
Finished.
rax=0x00000000017f8c1c (25136156)
rbx=0x0000000000000000 (0)
rcx=0x0000000000403e18 (4210200)
rdx=0x0000000000000000 (0)
rsi=0x00007ffce950e7d8 (140724222879704)
rdi=0x000000002ff18388 (804357000)
r8 =0x00007f51fa8e1f10 (139990072696592)
r9 =0x00007f51fa908040 (139990072852544)
r10=0x00007f51fa902908 (139990072830216)
r11=0x00007f51fa91d660 (139990072940128)
r12=0x00007ffce950e7d8 (140724222879704)
r13=0x0000000000401148 (4198728)
r14=0x0000000000403e18 (4210200)
r15=0x00007f51fa93c040 (139990073065536)
rflags(eflags)=0x00000206
rsp=0x00007ffce950e6a8
rbp=0x00007ffce950e6b8
rip=0x0000000000401443

課題 7-2 を実行した結果を以下に示す

$ gcc ex7-2.s lib.s -no-pie && ./a.out
Finished.
rax=0x0000000002e90edd (48828125)
rbx=0x0000000000000000 (0)
rcx=0x0000000000403e18 (4210200)
rdx=0x0000000000000000 (0)
rsi=0x0000000000000000 (0)
rdi=0x0000000000000005 (5)
r8 =0x00007f1333f63f10 (139720452882192)
r9 =0x00007f1333f8a040 (139720453038144)
r10=0x00007f1333f84908 (139720453015816)
r11=0x00007f1333f9f660 (139720453125728)
r12=0x00007ffec5d4b538 (140732217472312)
r13=0x0000000000401150 (4198736)
r14=0x0000000000403e18 (4210200)
r15=0x00007f1333fbe040 (139720453251136)
rflags(eflags)=0x00000206
rsp=0x00007ffec5d4b408
rbp=0x00007ffec5d4b418
rip=0x000000000040143b

課題 7-3

MOV 命令でレジスタを 0 にするのと、XOR 命令でレジスタを 0 にするのを比較した。
RDTSC 命令により、計測し、MOV 命令でレジスタを 0 にするのを 100000 回繰り返すのに要した時間を r8 レジスタに、
XOR 命令でレジスタを 0 にするのを 100000 回繰り返すのに要した時間を r9 レジスタに格納するようにし、実行を行った。

結果を以下に示す。

$ gcc ex7-3.s lib.s -no-pie && ./a.out
Finished.
rax=0x0000000000015c1f (89119)
rbx=0x0000000000000000 (0)
rcx=0x0000000000000000 (0)
rdx=0x00000000000141ca (82378)
rsi=0x00007ffc73fe49c8 (140722254531016)
rdi=0x0000000000000001 (1)
r8 =0x000000000002aac0 (174784)
r9 =0x0000000000015c1f (89119)
r10=0x00007ff50f7cf908 (140690503563528)
r11=0x00007ff50f7ea660 (140690503673440)
r12=0x00007ffc73fe49c8 (140722254531016)
r13=0x0000000000401156 (4198742)
r14=0x0000000000403e18 (4210200)
r15=0x00007ff50f809040 (140690503798848)
rflags(eflags)=0x00000202
rsp=0x00007ffc73fe4898
rbp=0x00007ffc73fe48a8
rip=0x0000000000401450

XOR 命令は 1 命令あたりおおよそ 89119 / 100000 = 0.89119 クロック要することがわかった。
また、MOV 命令に比べ、約半分の時間で処理が達成できている。
コンパイラが最適化で XOR 命令を使うのも納得の結果となった。
